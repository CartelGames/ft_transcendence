
{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}" />
	<script src="{% static 'js/script.js' %}" defer></script>
	<title>Transcendence Pong 42</title>
</head>
<body>

<header>
	<nav class="header-items">
		<ul>
			<li><a href="#index" onclick="showDiv('index')">Home</a></li>
			{% if user.is_authenticated %}
			<li><a href="#profil" onclick="showDiv('profil')">Mon profil</a></li>
			{% else %}
			<li><a href="#login" onclick="showDiv('login')">Login</a></li>
			{% endif %}
		</ul>
	</nav>
</header>

<div class="content">
	<!-- index -->
	<div id="index" class="block">
		<h1>Welcome to our Transcendence !</h1>
	</div>

	<!-- login -->
	<div id="login" class="block">
		<div class="form-container">
			{% if user.is_authenticated %}
			<h2>You are already logged in !</h2>
			{% else %}
			<h2>Login</h2>
			<iframe name="login" style="display:none;"></iframe>
			<form id="loginForm" enctype="multipart/form-data" action="{% url 'index' %}" method="post">
				<input type="hidden" name="type" value="login">
				{% csrf_token %}
				<label for="username">Username :</label>
				<input type="text" id="username" name="username" required>
				<label for="password">Password : </label>
				<input type="password" id="password" name="password" required>
				<label><a href="#signup" onclick="showDiv('signup')">Click here to signup !</a></label>
				<!-- <button type="submit">Se connecter</button> -->
				<div class="butt"><button type="submit" onclick="sendForm('loginForm', event)">Login</button></div>
				<!-- <button onclick="sendForm('loginForm', event)">Se connecter</button> -->
				<div id="error-form" class="error-form"></div>
			</form>
			{% endif %}
		</div>
	</div>

	<!-- signin -->
	<div id="signup" class="block">
		<div class="form-container">
			{% if user.is_authenticated %}
			<h2>You are already logged in !</h2>
			{% else %}
			<h2>Signup</h2>
			<iframe name="signup" style="display:none;"></iframe>
			<form id="signupForm" enctype="multipart/form-data" action="{% url 'index' %}" method="post">
				<input type="hidden" name="type" value="signup">
				{% csrf_token %}
				<label for="signup-username">Username :</label>
				<input type="text" id="signup-username" name="username" required>
				<label for="signup-pseudo">Pseudo :</label>
				<input type="text" id="signup-pseudo" name="pseudo" required>
				<label for="signup-email">Email :</label>
				<input type="email" id="signup-email" name="email" required>
				<label for="signup-pass">Password : </label>
				<input type="password" id="signup-pass" name="password1" required>
				<label for="signup-pass-repeat">Repeat password : </label>
				<input type="password" id="signup-pass-repeat" name="password2" required>
				<div class="butt"><button type="submit" onclick="sendForm('signupForm', event)">Signup</button></div>
				<div id="error-form" class="error-form"></div>
			</form>
			{% endif %}
		</div>
	</div>

	<!-- profil -->
	<div id="profil" class="block profil">
		<div class="form-container">
			<h2>Mon profil</h2>
			<img id="img"/>
			<p id="username"></p>
   			<p id="email"></p>
			<form id="profilForm" enctype="multipart/form-data" action="{% url 'index' %}" method="post">
				<input type="hidden" name="type" value="logout">
				{% csrf_token %}
				<div class="butt"><button2 type="submit" onclick="sendForm('profilForm', event)">Logout</button></div>
				<div id="error-form" class="error-form"></div>
			</form>
		</div>
	</div>
</div>

</body>
</html>